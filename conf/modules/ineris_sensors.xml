<!DOCTYPE module SYSTEM "module.dtd">
<module name="ineris_sensors" dir="ineris">
  <doc>
    <description>
    This reads the values for CO and CO2 concentration, temp, etc. from the INERIS sensors such as K30 sensor through UART.
    </description>
    <configure name="INERIS_SENSORS_PORT" value="UARTx" description="UART where the K30 sensor is connected to (UART3 by default)."/>
    <configure name="INERIS_SENSORS_BAUD" value="B115200" description="UART baud rate."/>
    
  </doc>
  <header>
    <file name="ineris_sensors.h"/>
  </header>
  <init fun="k30_init()"/>
  <periodic fun="k30_periodic()" freq="0.30" autorun="TRUE"/>
  <makefile target="ap">
    
    <configure name="INERIS_SENSORS_PORT"  case="upper|lower"/>
    <configure name="INERIS_SENSORS_BAUD" default="B9600"/>
    
    <define name="USE_$(INERIS_SENSORS_PORT_UPPER)"/>
    <define name="INERIS_SENSORS_DEV" value="$(INERIS_SENSORS_PORT_LOWER)"/>
    <define name="$(INERIS_SENSORS_PORT_UPPER)_BAUD" value="$(INERIS_SENSORS_BAUD)"/>
    
    
    <file name="ineris_sensors.c"/>
  
  </makefile>
</module>